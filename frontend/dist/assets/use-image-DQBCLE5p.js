import{r as l,U as S}from"./index-CC3hQ2IX.js";function h(s){const{loading:r,src:n,srcSet:u,onLoad:t,onError:a,crossOrigin:c,sizes:f,ignoreFallback:d}=s,[g,m]=l.useState("pending");l.useEffect(()=>{m(n?"loading":"pending")},[n]);const o=l.useRef(null),E=l.useCallback(()=>{if(!n)return;i();const e=new Image;e.src=n,c&&(e.crossOrigin=c),u&&(e.srcset=u),f&&(e.sizes=f),r&&(e.loading=r),e.onload=p=>{i(),m("loaded"),t==null||t(p)},e.onerror=p=>{i(),m("failed"),a==null||a(p)},o.current=e},[n,c,u,f,t,a,r]),i=()=>{o.current&&(o.current.onload=null,o.current.onerror=null,o.current=null)};return S(()=>{if(!d)return g==="loading"&&E(),()=>{i()}},[g,E,d]),d?"loaded":g}const I=(s,r)=>s!=="loaded"&&r==="beforeLoadOrError"||s==="failed"&&r==="onError";export{I as s,h as u};
